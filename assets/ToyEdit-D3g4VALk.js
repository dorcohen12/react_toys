import{E as j,A as f,s as g,r as u,a as v,b as C,j as e,L as S}from"./index-4DJCFm8d.js";import{r as T}from"./robot.service-CcKsjWgf.js";import{t as d}from"./toy.service-DZCfPixY.js";async function E(s){try{const a=s.id?j:f,n=await T.save(s);g.dispatch({type:a,robot:n})}catch(a){throw console.log("Having issues saving robot:",a),a}}function w(){const[s,a]=u.useState(d.createToy()),n=v(),{toyId:r}=C();u.useEffect(()=>{r&&y()},[]);function c({target:t}){let{name:i,value:o,type:x}=t;switch(x){case"number":case"range":o=+o;break;case"checkbox":o=t.checked}a(b=>({...b,[i]:o}))}async function y(){try{const t=await d.getById(r);a(t)}catch(t){console.log("error:",t)}}async function h(t){t.preventDefault();try{await E(robot),n("/toys")}catch(i){console.log("err:",i)}}console.log(s);const{name:m,type:p,batteryStatus:l}=s;return e.jsxs("section",{className:"toy-edit",children:[e.jsx(S,{to:"/toys",children:e.jsx("button",{className:"close-btn",children:"X"})}),e.jsxs("h1",{children:[r?"Edit":"Add"," Toy"]}),e.jsxs("form",{onSubmit:h,children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{onChange:c,value:m,type:"text",id:"name",name:"name"}),e.jsx("label",{htmlFor:"type",children:"Type"}),e.jsxs("select",{onChange:c,value:p,id:"type",name:"type",children:[e.jsx("option",{disabled:!0,value:"",children:"Choose a type"}),e.jsx("option",{value:"Cooking",children:"Cooking"}),e.jsx("option",{value:"Cleaning",children:"Cleaning"}),e.jsx("option",{value:"Pleasure",children:"Pleasure"}),e.jsx("option",{value:"Office",children:"Office"})]}),e.jsxs("label",{children:[" Battery status ",l,e.jsx("input",{onChange:c,value:l,type:"range",id:"batteryStatus",name:"batteryStatus"})]}),e.jsx("section",{className:"btns",children:e.jsx("button",{className:"btn",children:"Save"})})]})]})}export{w as default};
